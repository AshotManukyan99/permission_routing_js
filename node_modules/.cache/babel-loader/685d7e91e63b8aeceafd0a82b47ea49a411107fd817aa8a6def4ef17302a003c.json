{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useLocation, matchPath } from \"react-router-dom\";\nimport { useRoleContext } from \"../context/RoleContext\";\nimport { RedirectRules } from \"../utils/redirectRules\";\nexport var useRedirect = function useRedirect() {\n  _s();\n  var _useRoleContext = useRoleContext(),\n    role = _useRoleContext.role;\n  var _useLocation = useLocation(),\n    pathname = _useLocation.pathname;\n\n  // Internal redirect logic\n  var rule = RedirectRules.find(function (rule) {\n    return matchPath(pathname, rule.route);\n  });\n  var hasMissingProps = !role || !rule;\n  var shouldRedirect = (rule === null || rule === void 0 ? void 0 : rule.only) && rule.only.indexOf(role) < 0;\n  console.log(shouldRedirect, 'shouldRedirect');\n  if (hasMissingProps || shouldRedirect) {\n    return {\n      redirect: \"/\"\n    };\n  }\n  return {};\n};\n_s(useRedirect, \"7NhA3L0eEFaBATXcR9qCb17OoNc=\", false, function () {\n  return [useRoleContext, useLocation];\n});","map":{"version":3,"names":["useLocation","matchPath","useRoleContext","RedirectRules","useRedirect","_s","_useRoleContext","role","_useLocation","pathname","rule","find","route","hasMissingProps","shouldRedirect","only","indexOf","console","log","redirect"],"sources":["/home/hacktech/projects/uwhel/src/hooks/useRedirect.js"],"sourcesContent":["import {useLocation, matchPath} from \"react-router-dom\";\nimport {useRoleContext} from \"../context/RoleContext\";\nimport {RedirectRules} from \"../utils/redirectRules\";\n\nexport const useRedirect = () => {\n    const {role} = useRoleContext();\n    const {pathname} = useLocation();\n\n    // Internal redirect logic\n    const rule = RedirectRules.find((rule) => matchPath(pathname, rule.route));\n    const hasMissingProps = !role || !rule;\n    const shouldRedirect = rule?.only && rule.only.indexOf(role) < 0;\n\n    console.log(shouldRedirect, 'shouldRedirect')\n\n    if (hasMissingProps || shouldRedirect) {\n        return {redirect: \"/\"};\n    }\n\n    return {};\n};\n"],"mappings":";AAAA,SAAQA,WAAW,EAAEC,SAAS,QAAO,kBAAkB;AACvD,SAAQC,cAAc,QAAO,wBAAwB;AACrD,SAAQC,aAAa,QAAO,wBAAwB;AAEpD,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EAAAC,EAAA;EAC7B,IAAAC,eAAA,GAAeJ,cAAc,CAAC,CAAC;IAAxBK,IAAI,GAAAD,eAAA,CAAJC,IAAI;EACX,IAAAC,YAAA,GAAmBR,WAAW,CAAC,CAAC;IAAzBS,QAAQ,GAAAD,YAAA,CAARC,QAAQ;;EAEf;EACA,IAAMC,IAAI,GAAGP,aAAa,CAACQ,IAAI,CAAC,UAACD,IAAI;IAAA,OAAKT,SAAS,CAACQ,QAAQ,EAAEC,IAAI,CAACE,KAAK,CAAC;EAAA,EAAC;EAC1E,IAAMC,eAAe,GAAG,CAACN,IAAI,IAAI,CAACG,IAAI;EACtC,IAAMI,cAAc,GAAG,CAAAJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,IAAI,KAAIL,IAAI,CAACK,IAAI,CAACC,OAAO,CAACT,IAAI,CAAC,GAAG,CAAC;EAEhEU,OAAO,CAACC,GAAG,CAACJ,cAAc,EAAE,gBAAgB,CAAC;EAE7C,IAAID,eAAe,IAAIC,cAAc,EAAE;IACnC,OAAO;MAACK,QAAQ,EAAE;IAAG,CAAC;EAC1B;EAEA,OAAO,CAAC,CAAC;AACb,CAAC;AAACd,EAAA,CAhBWD,WAAW;EAAA,QACLF,cAAc,EACVF,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}